# CCNP IP
IP 位址的規劃

* IP 的組成 

IP 位址是由網路位置和主機位置組合而成的 32 位元位址。


     +---------+---------+---------+----------+
     |   8bits |   8bits |   8bits |   8bits  |
     +---------+---------+---------+----------+
  

* IP 的申請

由 NIC, Network Info Center 所決定，根據公司規模分配位置，如大型網路則為 A class, 小型則為 C。國內則是向電信公司或是網路服務公司提出申請。




      A class
      
      
       Network          Host Address = 16,777,216 台主機
      /       \  /                           \
     +---------+---------+---------+----------+
     |   8bits |            24 bits           |
     +---------+---------+---------+----------+
     
     網段開頭為 0
     故網段剩下 2 ^ 7 = 128 個網段 ＊ 16 M 台主機
     
     
     
      B class
      
            Network            Host Address = 65536 
      /                 \ /                  \
     +---------+---------+---------+----------+
     |   8bits |   8bits |        16 bits     |
     +---------+---------+---------+----------+
     
     網段開頭為 01
     故網段剩下 2 ^ 14 = 16,384 
     65536 - 2 = 65534 台主機
     
     
     
      C class
      
                  Network              Hosts = 256
      /                           \ /        \
     +---------+---------+---------+----------+
     |   8bits |   8bits |   8bits |   8bits  |
     +---------+---------+---------+----------+
     
     分配給小型公司
     網段開頭為 11
     故網段剩下 2 ^ 22 = 4,194,304
     扣除保留位置網段剩下 2 ^ 22 - 2 ^ 21 = 2,097,512 * 256 台主機 
     256 - 2 = 254 台主機
     
     
     
     
      DNS & Broadcast 
      
      網路設備的網路位置(最高，數字最小)和廣播位置（最低，數字最大），各一
      256 - 2 = 254 
      
     

* 2 的次方

      2 ^ 0  = 1

      2 ^ 1  = 2           

      2 ^ 2  = 4

      2 ^ 3  = 8

      2 ^ 4  = 16

      2 ^ 5  = 32

      2 ^ 6  = 64

      2 ^ 7 = 128

      2 ^ 8 = 256
 

# Subnetmask

(IGRP 適用)

子網路位址＋子網路遮罩

https://db-ip.com/all/172.16.1

       10.0.0.0
       
       
       172.16.0.0
       
       
       192.168.0.0

範例


      
           Network            Host Address = 65536 
      /                 \ /                  \
     +---------+---------+---------+----------+
     |   168   |    92   |        16 bits     |
     +---------+---------+---------+----------+
      
      
            Network      subnet = x (切成 x 個子網路)   
      /                 \ /  \ 
     +---------+---------+---------+----------+
     |   168   |    92   |       16 bits      |
     +---------+---------+---------+----------+  
                               \             /
                                host = 16 - x

# VLSM

(OSPF 適用)

https://github.com/QueenieCplusplus/CCNP_Routing


# CIDR ＆ Supernet

(僅有 EIGRP 和 OSPF 支援)

不分級的網域內部路由，非常重要！
關於路由器，有分 interior 和 exterior，CIDR 能解決內部路由網址不足或是過多的問題。

倘若無使用 CIDR，根據 A、Ｂ、Ｃ、Ｄ 格式可以發現，子網掩碼僅有如下五種，浪費很多 IP 位址！
0.0.0.0、
255.0.0.0、2
55.255.0.0、
255.255.255.0、
255.255.255.255

如使用 DIDR 建議：

(1) 必須使用 C 級的 IP 位址。

(2) 必須使用連續性的 IP 位址。

(3) 網路位址一定是在 2 的 n 次方之內。

(4）同一家 ISP。（連接單一 ）

https://kknews.cc/zh-tw/code/2n866me.html (CIDR 計算）

https://zh.wikipedia.org/wiki/无类别域间路由

      +--------+-----------------+------------------------------------+----------------------------------+
      | prefix | subnet mask     |subnet mask (binar) = prefix 個 1   | Hosts:e = 32 - prefix, 0 個數 為 e| 
      +--------+-----------------+------------------------------------+----------------------------------+
      |  /32   | 255.255.255.255 | 11111111.11111111.11111111.11111111|    1                             |       
      +--------+-----------------+------------------------------------+----------------------------------+
      |  /31   | 255.255.255.254 | 11111111.11111111.11111111.11111110|    2                             |      
      +--------+-----------------+------------------------------------+----------------------------------+
      |  /30   | 255.255.255.252 | 11111111.11111111.11111111.11111100|    4                             |   
      +--------+-----------------+------------------------------------+----------------------------------+
      |  /29   | 255.255.255.248 | 11111111.11111111.11111111.11111000|    2^3 -2                        |        
      +--------+-----------------+------------------------------------+----------------------------------+
      |  /28   | 255.255.255.240 | 11111111.11111111.11111111.11110000|    2^4 -2                        |
      +--------+-----------------+------------------------------------+----------------------------------+
      |  /27   | 255.255.255.255 | 11111111.11111111.11111111.11100000|    2^5 -2                        |
      +--------+-----------------+------------------------------------+----------------------------------+
      |                                           ～ 略 ~                                                 |
      +--------+-----------------+------------------------------------+----------------------------------+
      |  /24   | 255.255.255.0   | 11111111.11111111.11111111.00000000|    2^8 -2 = 254                  |
      +--------+-----------------+------------------------------------+----------------------------------+
      |                                           ～ 略 ~                                                 |
      +--------+-----------------+------------------------------------+----------------------------------+
      |  /20   | 255.255.240.0   | 11111111.11111111.11110000.00000000|    2^12 -2 = 4094                |
      +--------+-----------------+------------------------------------+----------------------------------+
      |                                                                                                  |
      |                                           ～ 略 ~                                                 |
      |                                                                                                  | 
      +--------+-----------------+------------------------------------+----------------------------------+
      (to be continued...)
